{% extends 'base.html.twig' %}

{% block body %}

    <div class="body-wrapper">
        <div class="photo-panel">
            <div class="photo-panel-position-wrapper">
                <div class="photo-wrapper">
                    <img src="/media/{{ photo.file }}"
                         onmousedown="photoCtrl.onMouseDown(event, this)"
                         ondrag="photoCtrl.onDrag(event, this)"
                         ondragend="photoCtrl.onMouseUp(event, this)"
                         onload="photoCtrl.onLoad()"
                         alt="" />

                    {% for label in labels %}
                    <div class="rect passive-rect rect-type-' + r.type + '" style="top: {{ label.position.top }}%; left: {{ label.position.left }}%; width: {{ label.position.width }}%; height: {{ label.position.height }}%; border-color: red"></div>
                    {% endfor %}

                    <div class="rect active-rect"></div>
                </div>
            </div>

        </div>
        <div class="action-panel">

            {{ form_start(form, {'attr': {'class': 'g-py-15 add-item-form', 'novalidate': 'novalidate'}}) }}

            {{ form_widget(form.coordinates, {'id': 'coordinates', 'attr': { 'hidden': 'hidden'}}) }}

            <div class="itemType">
                <label class="label">Тип на обекта</label>
                <div class="control">
                    <div class="select">
                        {{ form_widget(form.element, {'attr': {'class': 'form-control'}}) }}
                    </div>
                </div>
            </div>

            <div class="itemCondition">
                <label class="label">Състояние</label>
                <div class="control">
                    <div class="select">
                        {{ form_widget(form.condition, {'attr': {'class': 'form-control'}}) }}
                    </div>
                </div>
            </div>

            <a class="button is-link mtb10"
               id="submit-button"
               onclick="photoCtrl.addItem()"
               disabled>Добави</a>
            <a class="button is-light mtb10"
               id="clear-button"
               style="display: none"
               onclick="photoCtrl.clearSelection()">Изчисти</a>

            {{ form_end(form) }}

            <hr />

            <aside class="menu items">
                <p class="menu-label">
                    Отбелязани обекти
                </p>
                <ul class="menu-list">
                    <li id="item-window"
                        onmouseover="rectCtrl.showPassiveRects('window')"
                        onmouseleave="rectCtrl.hidePassiveRects('window')">
                        <a>Прозорец</a>
                    </li>
                    <li id="item-airconditioner"
                        onmouseover="rectCtrl.showPassiveRects('airconditioner')"
                        onmouseleave="rectCtrl.hidePassiveRects('airconditioner')">
                        <a>Климатик</a>
                    </li>
                </ul>
                <a class="button is-text"
                   onmouseover="rectCtrl.showAllPassiveRects()"
                   onmouseleave="rectCtrl.hideAllPassiveRects()">Покажи всички</a>

            </aside>
        </div>
    </div>

    <script>
      var itemTypes = {

        {% for element in elements %}

        element{{ element.id }}: {
          name: '{{ element.name }}',
          color: 'red'
        },

        {% endfor %}
      };
      console.log(itemTypes);
    </script>

{% endblock %}
